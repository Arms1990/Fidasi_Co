(this["webpackJsonpback-office"]=this["webpackJsonpback-office"]||[]).push([[3],{825:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a.n(r),s=a(231),i=a(15),l=a(1),c=a.n(l),o=a(10),u=a(14),m=a(132),p=a(33),d=a.n(p),f=a(85),g=a.n(f),b=a(86),h=a(228);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={children:d.a.node,className:d.a.string,closeClassName:d.a.string,closeAriaLabel:d.a.string,cssModule:d.a.object,color:d.a.string,fade:d.a.bool,isOpen:d.a.bool,toggle:d.a.func,tag:b.q,transition:d.a.shape(h.a.propTypes),innerRef:d.a.oneOfType([d.a.object,d.a.string,d.a.func])},E={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:k(k({},h.a.defaultProps),{},{unmountOnExit:!0})};function D(e){var t=e.className,a=e.closeClassName,r=e.closeAriaLabel,n=e.cssModule,s=e.tag,i=e.color,l=e.isOpen,m=e.toggle,p=e.children,d=e.transition,f=e.fade,v=e.innerRef,y=Object(u.a)(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),E=Object(b.m)(g()(t,"alert","alert-"+i,{"alert-dismissible":m}),n),D=Object(b.m)(g()("close",a),n),O=k(k(k({},h.a.defaultProps),d),{},{baseClass:f?d.baseClass:"",timeout:f?d.timeout:0});return c.a.createElement(h.a,Object(o.a)({},y,O,{tag:s,className:E,in:l,role:"alert",innerRef:v}),m?c.a.createElement("button",{type:"button",className:D,"aria-label":r,onClick:m},c.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,p)}D.propTypes=y,D.defaultProps=E;var O=D,j=a(335),S=a(92),L=a(96),w=a(23),N={tag:b.q,listTag:b.q,className:d.a.string,listClassName:d.a.string,cssModule:d.a.object,children:d.a.node,"aria-label":d.a.string},R=function(e){var t=e.className,a=e.listClassName,r=e.cssModule,n=e.children,s=e.tag,i=e.listTag,l=e["aria-label"],m=Object(u.a)(e,["className","listClassName","cssModule","children","tag","listTag","aria-label"]),p=Object(b.m)(g()(t),r),d=Object(b.m)(g()("breadcrumb",a),r);return c.a.createElement(s,Object(o.a)({},m,{className:p,"aria-label":l}),c.a.createElement(i,{className:d},n))};R.propTypes=N,R.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"};var U={tag:b.q,active:d.a.bool,className:d.a.string,cssModule:d.a.object},C=function(e){var t=e.className,a=e.cssModule,r=e.active,n=e.tag,s=Object(u.a)(e,["className","cssModule","active","tag"]),i=Object(b.m)(g()(t,!!r&&"active","breadcrumb-item"),a);return c.a.createElement(n,Object(o.a)({},s,{className:i,"aria-current":r?"page":void 0}))};C.propTypes=U,C.defaultProps={tag:"li"};a(89),a(99);var x=({heading:e,match:t})=>c.a.createElement(l.Fragment,null,e&&c.a.createElement("h1",{className:"font-weight-light"},e.charAt(0).toUpperCase()+e.slice(1))),I=a(204),P=a(98),M=a(17);class T extends l.Component{constructor(...e){var t;super(...e),t=this,this.state={fetchingDetails:!1,errorMessage:"",pageDetails:{},oldSlug:null},this.getDetails=function(){var e=Object(i.a)(n.a.mark((function e(a=null){var r,i,l,c,o,u,m,p,d,f,g,b,h,v,k;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props.match.params,i=r.slug,l=r.subSlug,c=t.props.location.search,o=t.props,u=o.token,m=o.baseURL,p=o.clientID,d=new URLSearchParams(c).entries(),(f=new URLSearchParams).set("page_slug",l?"".concat(i,"/").concat(l):i),f.set("client_id",p),g=Object(s.a)(d);try{for(g.s();!(b=g.n()).done;)h=b.value,f.set("queryString[".concat(h[0],"]"),h[1])}catch(n){g.e(n)}finally{g.f()}return f=f.toString(),t.setState({oldSlug:a,fetchingDetails:!0,pageDetails:{}}),e.prev=11,e.next=14,Object(M.a)("".concat(m,"/details?").concat(f),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(u)}});case 14:if(v=e.sent,![400,404].includes(v.status)){e.next=23;break}return e.t0=t,e.next=19,v.json();case 19:return e.t1=e.sent.message,e.t2={fetchingDetails:!1,errorMessage:e.t1},e.t0.setState.call(e.t0,e.t2),e.abrupt("return",t.props.history.push("/error"));case 23:return e.next=25,v.json();case 25:if(!(k=e.sent).details){e.next=28;break}return e.abrupt("return",t.setState({pageDetails:k.details},()=>{const e=t.state.oldSlug;if(null!==e){const a=k.details.allowedFrom;if(a&&!a.includes(e))return t.props.history.push("/error")}return t.setState({fetchingDetails:!1})}));case 28:return e.abrupt("return",t.setState({fetchingDetails:!1,pageDetails:{}}));case 31:return e.prev=31,e.t3=e.catch(11),e.abrupt("return",t.setState({fetchingDetails:!1,errorMessage:e.t3.message}));case 34:case"end":return e.stop()}}),e,null,[[11,31]])})));return function(){return e.apply(this,arguments)}}(),this.applyFilters=e=>this.setState({pageDetails:e,fetchingDetails:!0},()=>this.setState({fetchingDetails:!1}))}getDetailsView(){const e=this.props.match.params.slug,t=this.props,a=t.token,r=t.baseURL,n=t.clientID,s=t.clientSecret,i=t.user;let l=this.state,o=l.fetchingDetails,u=l.pageDetails,m=l.errorMessage,p=[];return o?c.a.createElement("div",{className:"text-center"},c.a.createElement("div",{className:"loading position-static"})):Object.values(u).length>0?(p=u.components?u.components.map((t,l)=>{const o=t.type;if("datatable"===o)return c.a.createElement(I.f,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("ddl"===o)return c.a.createElement(I.e,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("card"===o)return c.a.createElement(I.d,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("wizard"===o)return c.a.createElement(P.a,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("productCardList"===o)return c.a.createElement(I.l,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("productList"===o)return c.a.createElement(I.n,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),dynamicComponent:t});if("userCard"===o)return c.a.createElement(I.t,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("profileCard"===o)return c.a.createElement(I.o,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("productDescriptionText"===o)return c.a.createElement(I.m,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("iconCard"===o)return c.a.createElement(I.i,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("chart"===o){const e=t.kind;return"pie"===e?c.a.createElement("div",{key:l},c.a.createElement(I.k,{shadow:!0,component:t})):"bar"===e?c.a.createElement("div",{key:l},c.a.createElement(I.b,{shadow:!0,component:t})):"area"===e?c.a.createElement("div",{key:l},c.a.createElement(I.a,{shadow:!0,component:t})):"line"===e?c.a.createElement("div",{key:l},c.a.createElement(I.j,{shadow:!0,component:t})):"doughnut"===e?c.a.createElement("div",{key:l},c.a.createElement(I.g,{shadow:!0,component:t})):c.a.createElement("div",{key:l},c.a.createElement(I.a,{shadow:!0,component:t}))}if("calendar"===o)return c.a.createElement(I.c,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("table"===o)return c.a.createElement(I.q,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t});if("thumbCarousel"===o){const o=t.data.map(e=>({id:e.id,img:e.img}));return c.a.createElement(I.s,{data:o,slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t})}return"search"===o?c.a.createElement(I.p,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t}):"tabs"===o?c.a.createElement(I.r,{slug:e,token:a,user:i,clientSecret:s,baseURL:r,clientID:n,identifier:t.id,key:l,filters:u.filters.map(e=>({name:e.id,value:e.value})),component:t}):null}):null,c.a.createElement("div",null,c.a.createElement(I.h,{onFiltersApplied:e=>this.applyFilters(e),slug:e,filters:u.filters}),p)):""!==m?c.a.createElement(O,{className:"rounded",color:"danger"},m):c.a.createElement(O,{className:"rounded",color:"danger"},"Oops! No details available for ",e,".")}componentDidUpdate(e){var t=this;return Object(i.a)(n.a.mark((function a(){var r,s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=t.props.match.params.slug,s=e.match.params.slug,r===s){a.next=6;break}return a.next=5,t.getDetails(s);case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))()}componentDidMount(){var e=this;return Object(i.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.slug,t.next=3,e.getDetails(a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}render(){const e=this.props.match.params.slug,t=this.state.pageDetails;return document.title="".concat(t.title||e.charAt(0).toUpperCase()+e.slice(1)," | Back Office"),document.body.classList.add("rounded"),c.a.createElement(l.Fragment,null,c.a.createElement(j.a,null,c.a.createElement(S.a,{xxs:"12"},c.a.createElement(x,{heading:t.title||e,match:this.props.match}))),c.a.createElement(j.a,null,c.a.createElement(S.a,{xxs:"12",className:"mb-4"},this.getDetailsView())))}}t.default=Object(L.g)(Object(w.b)(({authUser:e,menu:t})=>{const a=t.containerClassnames;return{token:e.token,baseURL:e.baseURL,clientID:e.clientID,clientSecret:e.clientSecret,user:e.user,containerClassnames:a}},{})(T))}}]);
//# sourceMappingURL=details-page.9a055b5a.chunk.js.map